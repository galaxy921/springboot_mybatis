<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.dao.ProjectDao">

    <select id="findAllProject" resultType="com.example.model.Project">
        SELECT p_id,p_name,p_details,p_file,p_report,score,percentage,p_state
        FROM project
    </select>

    <delete id="deleteProject" >
        DELETE FROM `project` where p_id=#{p_id}
    </delete>

    <insert id="insertProject" parameterType="com.example.model.Project" useGeneratedKeys="true" keyProperty="p_id" keyColumn="p_id">
		INSERT INTO
		project(p_id,p_name,p_details,p_file,p_report,score,percentage,p_state)
		VALUES
		(#{p_id},#{p_name},#{p_details},#{p_file},#{p_report},#{score},#{percentage},#{p_state})
	</insert>

    <update id="updateProject" parameterType="com.example.model.Project">
        update project
        <set>
            <if test="p_id!=null">p_id=#{p_id},</if>
            <if test="p_name!=null">p_name=#{p_name},</if>
            <if test="p_details!=null">p_details=#{p_details},</if>
            <if test="p_file!=null">p_file=#{p_file},</if>
            <if test="p_report!=null">p_report=#{p_report},</if>
            <if test="score!=null">score=#{score},</if>
            <if test="percentage!=null">percentage=#{percentage},</if>
            <if test="p_state!=null">p_state=#{p_state},</if>
        </set>
        where p_id=#{p_id}
    </update>
</mapper>
